{"version":3,"sources":["images/mountains.jpg","post/apiPost.js","post/Posts.js","core/Home.js","auth/index.js","core/Menu.js","user/Signup.js","user/SocialLogin.js","user/Signin.js","user/apiUser.js","user/DeleteUser.js","user/FollowProfileButton.js","user/ProfileTabs.js","user/Profile.js","user/Users.js","user/EditProfile.js","user/FindPeople.js","post/NewPost.js","post/Comment.js","post/SinglePost.js","auth/PrivateRoute.js","post/EditPost.js","user/ForgotPassword.js","user/ResetPassword.js","admin/Admin.js","MainRouter/index.js","App.js","index.js","images/avatar.jpg"],"names":["module","exports","singlePost","postId","fetch","process","method","then","response","json","catch","err","console","log","remove","token","headers","Accept","Authorization","like","userId","body","JSON","stringify","unlike","comment","uncomment","Posts","loadPosts","page","list","data","error","setState","posts","loadMore","number","state","loadLess","renderPosts","className","map","post","i","posterId","postedBy","_id","posterName","name","key","src","alt","title","onError","target","DefaultPost","style","height","width","substring","to","Date","created","toDateString","this","length","onClick","Component","Home","authenticate","jwt","next","window","localStorage","setItem","signout","removeItem","isAuthenticated","getItem","parse","forgotPassword","email","isActive","history","path","location","pathname","color","withRouter","user","cursor","push","role","Signup","handleChange","event","value","recaptchaHandler","e","dayCount","userDay","toLowerCase","getDay","recaptcha","clickSubmit","preventDefault","password","signup","open","signupForm","onChange","type","placeholder","display","SocialLogin","responseGoogle","profileObj","socialLogin","googleId","imageUrl","redirectToReferrer","clientId","buttonText","onSuccess","onFailure","Signin","loading","signin","redirectToReferer","signinForm","read","follow","followId","unfollow","unfollowId","DeleteUser","redirect","deleteAccount","props","deleteConfirmed","confirm","FollowProfileButton","followClick","onButtonClick","unfollowClick","following","ProfileTabs","followers","person","borderRadius","border","DefaultProfile","Profile","checkFollow","find","follower","clickFollowButton","callApi","init","redirectToSignin","listByUser","match","params","photoUrl","getTime","class","about","Users","renderUsers","users","EditProfile","redirectToProfile","id","isValid","fileSize","test","files","size","userData","set","update","auth","updateUser","accept","FormData","FindPeople","clickFollow","toFollow","splice","followMessage","findPeople","NewPost","postData","create","newPostForm","photo","Comment","text","isvalid","addComment","updateComments","comments","deleteComment","onSubmit","SinglePost","redirectToHome","likes","likeToggle","componentDidMount","undefined","checkLike","indexOf","deletePost","renderPost","objectFit","padding","reverse","PrivateRoute","component","EditPost","editPostForm","ForgotPassword","message","autoFocus","ResetPassword","resetPassword","resetInfo","newPassword","resetPasswordLink","resetPasswordToken","Admin","MainRouter","exact","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.68fb5efe.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/mountains.586806cd.jpg\";","export const create = (userId, token, post) => {\r\n    return fetch(`${process.env.REACT_APP_API_URL}/post/new/${userId}`, {\r\n        method: \"POST\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: post\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const list = page => {\r\n    return fetch(`${process.env.REACT_APP_API_URL}/posts/?page=${page}`, {\r\n        method: \"GET\"\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const singlePost = postId => {\r\n    return fetch(`${process.env.REACT_APP_API_URL}/post/${postId}`, {\r\n        method: \"GET\"\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const listByUser = (userId, token) => {\r\n    return fetch(`${process.env.REACT_APP_API_URL}/posts/by/${userId}`, {\r\n        method: \"GET\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`\r\n        }\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const remove = (postId, token) => {\r\n    return fetch(`${process.env.REACT_APP_API_URL}/post/${postId}`, {\r\n        method: \"DELETE\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`\r\n        }\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const update = (postId, token, post) => {\r\n    console.log(\"POST DATA UPDATE: \", post);\r\n    return fetch(`${process.env.REACT_APP_API_URL}/post/${postId}`, {\r\n        method: \"PUT\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: post\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const like = (userId, token, postId) => {\r\n    return fetch(`${process.env.REACT_APP_API_URL}/post/like`, {\r\n        method: \"PUT\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\":'application/json',\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({userId,postId})\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const unlike = (userId, token, postId) => {\r\n    return fetch(`${process.env.REACT_APP_API_URL}/post/unlike`, {\r\n        method: \"PUT\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\":'application/json',\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({userId,postId})\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const comment = (userId, token, postId,comment) => {\r\n    return fetch(`${process.env.REACT_APP_API_URL}/post/comment`, {\r\n        method: \"PUT\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\":'application/json',\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({userId,postId,comment})\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\nexport const uncomment = (userId, token, postId,comment) => {\r\n    return fetch(`${process.env.REACT_APP_API_URL}/post/uncomment`, {\r\n        method: \"PUT\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\":'application/json',\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({userId,postId,comment})\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};","import React, { Component } from \"react\";\r\nimport { list } from \"./apiPost\";\r\nimport DefaultPost from \"../images/mountains.jpg\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nclass Posts extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            posts: [],\r\n            page: 1\r\n        };\r\n    }\r\n    \r\n    loadPosts = page => {\r\n        list(page).then(data => {\r\n            if (data.error) {\r\n                console.log(data.error);\r\n            } else {\r\n                this.setState({ posts: data });\r\n            }\r\n        });\r\n    };\r\n    \r\n    componentDidMount() {\r\n        this.loadPosts(this.state.page);\r\n    }\r\n\r\n    loadMore = number => {\r\n        this.setState({ page: this.state.page + number });\r\n        this.loadPosts(this.state.page + number);\r\n    };\r\n \r\n    loadLess = number => {\r\n        this.setState({ page: this.state.page - number });\r\n        this.loadPosts(this.state.page - number);\r\n    };\r\n\r\n    renderPosts = posts => {\r\n        return (\r\n            <div className=\"row\">\r\n                {posts.map((post, i) => {\r\n                    const posterId = post.postedBy\r\n                        ? `/user/${post.postedBy._id}`\r\n                        : \"\";\r\n                    const posterName = post.postedBy\r\n                        ? post.postedBy.name\r\n                        : \" Unknown\";\r\n                    return (\r\n                        <div className=\"card col-md-4\" key={i}>\r\n                            <div className=\"card-body\">\r\n                                <img\r\n                                    src={`${\r\n                                        process.env.REACT_APP_API_URL\r\n                                    }/post/photo/${post._id}`}\r\n                                    alt={post.title}\r\n                                    onError={i =>\r\n                                        (i.target.src = `${DefaultPost}`)\r\n                                    }\r\n                                    className=\"img-thunbnail mb-3\"\r\n                                    style={{ height: \"200px\", width: \"100%\" }}\r\n                                />\r\n                                <h5 className=\"card-title\">{post.title}</h5>\r\n                                <p className=\"card-text\">\r\n                                    {post.body.substring(0, 100)}\r\n                                </p>\r\n                                <br />\r\n                                <p className=\"font-italic mark\">\r\n                                    Posted by{\" \"}\r\n                                    <Link to={`${posterId}`}>\r\n                                        {posterName}{\" \"}\r\n                                    </Link>\r\n                                    on {new Date(post.created).toDateString()}\r\n                                </p>\r\n                                <Link\r\n                                    to={`/post/${post._id}`}\r\n                                    className=\"btn btn-raised btn-primary btn-sm\"\r\n                                >\r\n                                    Read more\r\n                                </Link>\r\n                            </div>\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n        );\r\n    };\r\n\r\n    render() {\r\n        const { posts,page } = this.state;\r\n        return (\r\n            <div className=\"container\">\r\n                <h2 className=\"mt-5 mb-5\">\r\n                    {!posts.length ? \"Loading...\" : \"Recent Posts\"}\r\n                </h2>\r\n\r\n                {this.renderPosts(posts)}\r\n                {page > 1 ? (\r\n                    <button\r\n                        className=\"btn btn-raised btn-warning mr-5 mt-5 mb-5\"\r\n                        onClick={() => this.loadLess(1)}\r\n                    >\r\n                        Previous (Page {this.state.page - 1})\r\n                    </button>\r\n                ) : (\r\n                    \"\"\r\n                )}\r\n \r\n                {posts.length ? (\r\n                    <button\r\n                        className=\"btn btn-raised btn-success mt-5 mb-5\"\r\n                        onClick={() => this.loadMore(1)}\r\n                    >\r\n                        Next (Page {page + 1})\r\n                    </button>\r\n                ) : (\r\n                    \"\"\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Posts;\r\n","import React from \"react\";\r\nimport Posts from \"../post/Posts\";\r\n\r\nconst Home = () => (\r\n    <div>\r\n        <div className=\"jumbotron\">\r\n            <h2>Home</h2>\r\n            <p className=\"lead\">Welcome to React Frontend</p>\r\n        </div>\r\n        <div className=\"container\">\r\n            <Posts />\r\n        </div>\r\n    </div>\r\n);\r\n\r\nexport default Home;\r\n","export const signup = user => {\r\n    return fetch(`${process.env.REACT_APP_API_URL}/signup`, {\r\n        method: \"POST\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify(user)\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const signin = user => {\r\n    return fetch(`${process.env.REACT_APP_API_URL}/signin`, {\r\n        method: \"POST\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify(user)\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const authenticate = (jwt, next) => {\r\n    if (typeof window !== \"undefined\") {\r\n        localStorage.setItem(\"jwt\", JSON.stringify(jwt));\r\n        next();\r\n    }\r\n};\r\n\r\nexport const setName = (name, next) => {\r\n    if (typeof window !== \"undefined\") {\r\n        localStorage.setItem(\"username\", JSON.stringify(name));\r\n        next();\r\n    }\r\n};\r\n\r\nexport const signout = next => {\r\n    if (typeof window !== \"undefined\") localStorage.removeItem(\"jwt\");\r\n    next();\r\n    return fetch(`${process.env.REACT_APP_API_URL}/signout`, {\r\n        method: \"GET\"\r\n    })\r\n        .then(response => {\r\n            console.log(\"signout\", response);\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const isAuthenticated = () => {\r\n    if (typeof window == \"undefined\") {\r\n        return false;\r\n    }\r\n\r\n    if (localStorage.getItem(\"jwt\")) {\r\n        return JSON.parse(localStorage.getItem(\"jwt\"));\r\n    } else {\r\n        return false;\r\n    }\r\n};\r\n\r\nexport const forgotPassword = email => {\r\n    console.log(\"email: \", email);\r\n    return fetch(`${process.env.REACT_APP_API_URL}/forgot-password/`, {\r\n        method: \"PUT\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify({ email })\r\n    })\r\n        .then(response => {\r\n            console.log(\"forgot password response: \", response);\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const resetPassword = resetInfo => {\r\n    return fetch(`${process.env.REACT_APP_API_URL}/reset-password/`, {\r\n        method: \"PUT\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify(resetInfo)\r\n    })\r\n        .then(response => {\r\n            console.log(\"forgot password response: \", response);\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const socialLogin = user => {\r\n    return fetch(`${process.env.REACT_APP_API_URL}/social-login/`, {\r\n        method: \"POST\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\"\r\n        },\r\n        // credentials: \"include\", // works only in the same origin\r\n        body: JSON.stringify(user)\r\n    })\r\n        .then(response => {\r\n            console.log(\"signin response: \", response);\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n","import React from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport { signout, isAuthenticated } from \"../auth\";\r\n\r\nconst isActive = (history, path) => {\r\n    if (history.location.pathname === path) return { color: \"#ff9900\" };\r\n    else return { color: \"#ffffff\" };\r\n};\r\n\r\nconst Menu = ({ history }) => (\r\n    <div>\r\n        <ul className=\"nav nav-tabs bg-primary\">\r\n            <li className=\"nav-item\">\r\n                <Link\r\n                    className=\"nav-link\"\r\n                    style={isActive(history, \"/\")}\r\n                    to=\"/\"\r\n                >\r\n                    Home\r\n                </Link>\r\n            </li>\r\n\r\n            <li className=\"nav-item\">\r\n                <Link\r\n                    className=\"nav-link\"\r\n                    style={isActive(history, \"/users\")}\r\n                    to=\"/users\"\r\n                >\r\n                    Users\r\n                </Link>\r\n            </li>\r\n            \r\n            <li className=\"nav-item\">\r\n                <Link\r\n                    to={`/post/create`}\r\n                    style={isActive(history, `/post/create`)}\r\n                    className=\"nav-link\"\r\n                >\r\n                    Create Post\r\n                </Link>\r\n            </li>\r\n\r\n            {!isAuthenticated() && (\r\n                <>\r\n                    <li className=\"nav-item\">\r\n                        <Link\r\n                            className=\"nav-link\"\r\n                            style={isActive(history, \"/signin\")}\r\n                            to=\"/signin\"\r\n                        >\r\n                            Sign In\r\n                        </Link>\r\n                    </li>\r\n                    <li className=\"nav-item\">\r\n                        <Link\r\n                            className=\"nav-link\"\r\n                            style={isActive(history, \"/signup\")}\r\n                            to=\"/signup\"\r\n                        >\r\n                            Sign Up\r\n                        </Link>\r\n                    </li>\r\n                </>\r\n            )}\r\n\r\n            {isAuthenticated() && (\r\n                <>\r\n                    <li className=\"nav-item\">\r\n                        <Link\r\n                            to={`/findpeople`}\r\n                            style={isActive(history, `/findpeople`)}\r\n                            className=\"nav-link\"\r\n                        >\r\n                            Find People\r\n                        </Link>\r\n                    </li>\r\n\r\n                    <li className=\"nav-item\">\r\n                        <Link\r\n                            to={`/user/${isAuthenticated().user._id}`}\r\n                            style={isActive(\r\n                                history,\r\n                                `/user/${isAuthenticated().user._id}`\r\n                            )}\r\n                            className=\"nav-link\"\r\n                        >\r\n                            {`${isAuthenticated().user.name}`}\r\n                        </Link>\r\n                    </li>\r\n                    \r\n                    <li className=\"nav-item\">\r\n                        <span\r\n                            className=\"nav-link\"\r\n                            style={\r\n                                (isActive(history, \"/signup\"),\r\n                                { cursor: \"pointer\", color: \"#fff\" })\r\n                            }\r\n                            onClick={() => signout(() => history.push(\"/\"))}\r\n                        >\r\n                            Sign Out\r\n                        </span>\r\n                    </li>\r\n                </>\r\n            )}\r\n            {isAuthenticated() && isAuthenticated().user.role == \"admin\" && (\r\n                <li className=\"nav-item\">\r\n                    <Link\r\n                        to={`/admin`}\r\n                        style={isActive(history, `/admin`)}\r\n                        className=\"nav-link\"\r\n                    >\r\n                        Admin\r\n                    </Link>\r\n                </li>\r\n            )}\r\n        </ul>\r\n    </div>\r\n);\r\n\r\nexport default withRouter(Menu);\r\n","import React, { Component } from \"react\";\r\nimport { signup } from \"../auth\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nclass Signup extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            name: \"\",\r\n            email: \"\",\r\n            password: \"\",\r\n            error: \"\",\r\n            open: false,\r\n            recaptcha:false\r\n        };\r\n    }\r\n\r\n    handleChange = name => event => {\r\n        this.setState({ error: \"\" });\r\n        this.setState({ [name]: event.target.value });\r\n    };\r\n    \r\n    recaptchaHandler = e => {\r\n        this.setState({ error: \"\" });\r\n        let userDay = e.target.value.toLowerCase();\r\n        let dayCount;\r\n \r\n        if (userDay === \"sunday\") {\r\n            dayCount = 0;\r\n        } else if (userDay === \"monday\") {\r\n            dayCount = 1;\r\n        } else if (userDay === \"tuesday\") {\r\n            dayCount = 2;\r\n        } else if (userDay === \"wednesday\") {\r\n            dayCount = 3;\r\n        } else if (userDay === \"thursday\") {\r\n            dayCount = 4;\r\n        } else if (userDay === \"friday\") {\r\n            dayCount = 5;\r\n        } else if (userDay === \"saturday\") {\r\n            dayCount = 6;\r\n        }\r\n        \r\n        if (dayCount === new Date().getDay()) {\r\n            this.setState({ recaptcha: true });\r\n            return true;\r\n        } else {\r\n            this.setState({\r\n                recaptcha: false\r\n            });\r\n            return false;\r\n        }\r\n    };\r\n\r\n    clickSubmit = event => {\r\n        event.preventDefault();\r\n        const { name, email, password } = this.state;\r\n        const user = {\r\n            name,\r\n            email,\r\n            password\r\n        };\r\n        // console.log(user);\r\n        if (this.state.recaptcha) {\r\n            signup(user).then(data => {\r\n                if (data.error) this.setState({ error: data.error });\r\n                else\r\n                    this.setState({\r\n                        error: \"\",\r\n                        name: \"\",\r\n                        email: \"\",\r\n                        password: \"\",\r\n                        open: true\r\n                    });\r\n            });\r\n        } else {\r\n            this.setState({\r\n                error: \"What day is today? Please write a correct answer!\"\r\n            });\r\n        }\r\n    };\r\n\r\n    signupForm = (name, email, password,recaptcha) => (\r\n        <form>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Name</label>\r\n                <input\r\n                    onChange={this.handleChange(\"name\")}\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    value={name}\r\n                />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Email</label>\r\n                <input\r\n                    onChange={this.handleChange(\"email\")}\r\n                    type=\"email\"\r\n                    className=\"form-control\"\r\n                    value={email}\r\n                />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Password</label>\r\n                <input\r\n                    onChange={this.handleChange(\"password\")}\r\n                    type=\"password\"\r\n                    className=\"form-control\"\r\n                    value={password}\r\n                />\r\n            </div>\r\n            \r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">\r\n                    {recaptcha ? \"Thanks. You got it!\" : \"What day is today?\"}\r\n                </label>\r\n \r\n                <input\r\n                    onChange={this.recaptchaHandler}\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Eg.: Sunday\"\r\n                />\r\n            </div>\r\n            \r\n            <button\r\n                onClick={this.clickSubmit}\r\n                className=\"btn btn-raised btn-primary\"\r\n            >\r\n                Submit\r\n            </button>\r\n        </form>\r\n    );\r\n\r\n    render() {\r\n        const { name, email, password, error, open, recaptcha } = this.state;\r\n        return (\r\n            <div className=\"container\">\r\n                <h2 className=\"mt-5 mb-5\">Signup</h2>\r\n\r\n                <div\r\n                    className=\"alert alert-danger\"\r\n                    style={{ display: error ? \"\" : \"none\" }}\r\n                >\r\n                    {error}\r\n                </div>\r\n\r\n                <div\r\n                    className=\"alert alert-info\"\r\n                    style={{ display: open ? \"\" : \"none\" }}\r\n                >\r\n                    New account is successfully created. Please{\" \"}\r\n                    <Link to=\"/signin\">Sign In</Link>.\r\n                </div>\r\n\r\n                {this.signupForm(name, email, password,recaptcha)}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Signup;\r\n","import React, { Component } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport GoogleLogin from \"react-google-login\";\r\nimport { socialLogin, authenticate } from \"../auth\";\r\n\r\nclass SocialLogin extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            redirectToReferrer: false\r\n        };\r\n    }\r\n \r\n    responseGoogle = response => {\r\n        console.log(response);\r\n        const { googleId, name, email, imageUrl } = response.profileObj;\r\n        const user = {\r\n            password: googleId,\r\n            name: name,\r\n            email: email,\r\n            imageUrl: imageUrl\r\n        };\r\n        // console.log(\"user obj to social login: \", user);\r\n        socialLogin(user).then(data => {\r\n            console.log(\"signin data: \", data);\r\n            if (data.error) {\r\n                console.log(\"Error Login. Please try again..\");\r\n            } else {\r\n                console.log(\"signin success - setting jwt: \", data);\r\n                authenticate(data, () => {\r\n                    this.setState({ redirectToReferrer: true });\r\n                });\r\n            }\r\n        });\r\n    };\r\n \r\n    render() {\r\n        // redirect\r\n        const { redirectToReferrer } = this.state;\r\n        if (redirectToReferrer) {\r\n            return <Redirect to=\"/\" />;\r\n        }\r\n \r\n        return (\r\n            <GoogleLogin\r\n                clientId=\"214848994819-buj8l4entuhbfem6ocd870oorfmourc7.apps.googleusercontent.com\"\r\n                buttonText=\"Login with Google\"\r\n                onSuccess={this.responseGoogle}\r\n                onFailure={this.responseGoogle}\r\n            />\r\n        );\r\n    }\r\n}\r\n \r\nexport default SocialLogin;","import React, { Component } from \"react\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport { signin, authenticate } from \"../auth\";\r\nimport SocialLogin from \"./SocialLogin\";\r\nclass Signin extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            email: \"\",\r\n            password: \"\",\r\n            error: \"\",\r\n            redirectToReferer: false,\r\n            loading: false,\r\n            recaptcha:false\r\n        };\r\n    }\r\n\r\n    handleChange = name => event => {\r\n        this.setState({ error: \"\" });\r\n        this.setState({ [name]: event.target.value });\r\n    };\r\n\r\n    recaptchaHandler = e => {\r\n        this.setState({ error: \"\" });\r\n        let userDay = e.target.value.toLowerCase();\r\n        let dayCount;\r\n \r\n        if (userDay === \"sunday\") {\r\n            dayCount = 0;\r\n        } else if (userDay === \"monday\") {\r\n            dayCount = 1;\r\n        } else if (userDay === \"tuesday\") {\r\n            dayCount = 2;\r\n        } else if (userDay === \"wednesday\") {\r\n            dayCount = 3;\r\n        } else if (userDay === \"thursday\") {\r\n            dayCount = 4;\r\n        } else if (userDay === \"friday\") {\r\n            dayCount = 5;\r\n        } else if (userDay === \"saturday\") {\r\n            dayCount = 6;\r\n        }\r\n        \r\n        if (dayCount === new Date().getDay()) {\r\n            this.setState({ recaptcha: true });\r\n            return true;\r\n        } else {\r\n            this.setState({\r\n                recaptcha: false\r\n            });\r\n            return false;\r\n        }\r\n    };\r\n    \r\n    clickSubmit = event => {\r\n        event.preventDefault();\r\n        this.setState({ loading: true });\r\n        const { email, password } = this.state;\r\n        const user = {\r\n            email,\r\n            password\r\n        };\r\n        // console.log(user);\r\n        if (this.state.recaptcha) {\r\n            signin(user).then(data => {\r\n                if (data.error) {\r\n                    this.setState({ error: data.error, loading: false });\r\n                } else {\r\n                    // authenticate\r\n                    authenticate(data, () => {\r\n                        this.setState({ redirectToReferer: true });\r\n                    });\r\n                }\r\n            });\r\n        } else {\r\n            this.setState({\r\n                loading: false,\r\n                error: \"What day is today? Please write a correct answer!\"\r\n            });\r\n        }\r\n    };\r\n\r\n    signinForm = (email, password,recaptcha) => (\r\n        <form>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Email</label>\r\n                <input\r\n                    onChange={this.handleChange(\"email\")}\r\n                    type=\"email\"\r\n                    className=\"form-control\"\r\n                    value={email}\r\n                />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Password</label>\r\n                <input\r\n                    onChange={this.handleChange(\"password\")}\r\n                    type=\"password\"\r\n                    className=\"form-control\"\r\n                    value={password}\r\n                />\r\n            </div>\r\n            \r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">\r\n                    {recaptcha ? \"Thanks. You got it!\" : \"What day is today?\"}\r\n                </label>\r\n            \r\n                <input\r\n                    onChange={this.recaptchaHandler}\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Eg.: Sunday\"\r\n                />\r\n            </div>\r\n            \r\n            <button\r\n                onClick={this.clickSubmit}\r\n                className=\"btn btn-raised btn-primary\"\r\n            >\r\n                Submit\r\n            </button>\r\n        </form>\r\n    );\r\n\r\n    render() {\r\n        const {\r\n            email,\r\n            password,\r\n            error,\r\n            redirectToReferer,\r\n            loading,\r\n            recaptcha\r\n        } = this.state;\r\n\r\n        if (redirectToReferer) {\r\n            return <Redirect to=\"/\" />;\r\n        }\r\n\r\n        return (\r\n            <div className=\"container\">\r\n                <h2 className=\"mt-5 mb-5\">SignIn</h2>\r\n                \r\n                <hr />\r\n                <SocialLogin />\r\n                <hr />\r\n                \r\n                <div\r\n                    className=\"alert alert-danger\"\r\n                    style={{ display: error ? \"\" : \"none\" }}\r\n                >\r\n                    {error}\r\n                </div>\r\n\r\n                {loading ? (\r\n                    <div className=\"jumbotron text-center\">\r\n                        <h2>Loading...</h2>\r\n                    </div>\r\n                ) : (\r\n                    \"\"\r\n                )}\r\n\r\n                {this.signinForm(email, password,recaptcha)}\r\n                \r\n                <p>\r\n                    <Link to=\"/forgot-password\" className=\"text-danger\">\r\n                        {\" \"}\r\n                        Forgot Password\r\n                    </Link>\r\n                </p>\r\n                \r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Signin;\r\n","export const read = (userId, token) => {\r\n    return fetch(`${process.env.REACT_APP_API_URL}/user/${userId}`, {\r\n        method: \"GET\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`\r\n        }\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const update = (userId, token, user) => {\r\n    console.log(\"USER DATA UPDATE: \", user);\r\n    return fetch(`${process.env.REACT_APP_API_URL}/user/${userId}`, {\r\n        method: \"PUT\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: user\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const remove = (userId, token) => {\r\n    return fetch(`${process.env.REACT_APP_API_URL}/user/${userId}`, {\r\n        method: \"DELETE\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`\r\n        }\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const list = () => {\r\n    return fetch(`${process.env.REACT_APP_API_URL}/users`, {\r\n        method: \"GET\"\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const updateUser = (user, next) => {\r\n    if (typeof window !== \"undefined\") {\r\n        if (localStorage.getItem(\"jwt\")) {\r\n            let auth = JSON.parse(localStorage.getItem(\"jwt\"));\r\n            auth.user = user;\r\n            localStorage.setItem(\"jwt\", JSON.stringify(auth));\r\n            next();\r\n        }\r\n    }\r\n};\r\n\r\nexport const follow = (userId, token, followId) => {\r\n    return fetch(`${process.env.REACT_APP_API_URL}/user/follow`, {\r\n        method: \"PUT\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({ userId, followId })\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const unfollow = (userId, token, unfollowId) => {\r\n    return fetch(`${process.env.REACT_APP_API_URL}/user/unfollow`, {\r\n        method: \"PUT\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({ userId, unfollowId })\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const findPeople = (userId, token) => {\r\n    return fetch(`${process.env.REACT_APP_API_URL}/user/findpeople/${userId}`, {\r\n        method: \"GET\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`\r\n        }\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { isAuthenticated } from \"../auth\";\r\nimport { remove } from \"./apiUser\";\r\nimport { signout } from \"../auth\";\r\n\r\nclass DeleteUser extends Component {\r\n    state = {\r\n        redirect: false\r\n    };\r\n\r\n    deleteAccount = () => {\r\n        const token = isAuthenticated().token;\r\n        const userId = this.props.userId;\r\n        remove(userId, token).then(data => {\r\n            if (data.error) {\r\n                console.log(data.error);\r\n            } else {\r\n                // signout user\r\n                signout(() => console.log(\"User is deleted\"));\r\n                // redirect\r\n                this.setState({ redirect: true });\r\n            }\r\n        });\r\n    };\r\n\r\n    deleteConfirmed = () => {\r\n        let answer = window.confirm(\r\n            \"Are you sure you want to delete your account?\"\r\n        );\r\n        if (answer) {\r\n            this.deleteAccount();\r\n        }\r\n    };\r\n\r\n    render() {\r\n        if (this.state.redirect) {\r\n            return <Redirect to=\"/\" />;\r\n        }\r\n        return (\r\n            <button\r\n                onClick={this.deleteConfirmed}\r\n                className=\"btn btn-raised btn-danger\"\r\n            >\r\n                Delete Profile\r\n            </button>\r\n        );\r\n    }\r\n}\r\n\r\nexport default DeleteUser;\r\n","import React, { Component } from \"react\";\r\nimport { follow, unfollow } from \"./apiUser\";\r\n\r\nclass FollowProfileButton extends Component {\r\n    followClick = () => {\r\n        this.props.onButtonClick(follow);\r\n    };\r\n\r\n    unfollowClick = () => {\r\n        this.props.onButtonClick(unfollow);\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"d-inline-block\">\r\n                {!this.props.following ? (\r\n                    <button\r\n                        onClick={this.followClick}\r\n                        className=\"btn btn-success btn-raised mr-5\"\r\n                    >\r\n                        Follow\r\n                    </button>\r\n                ) : (\r\n                    <button\r\n                        onClick={this.unfollowClick}\r\n                        className=\"btn btn-warning btn-raised\"\r\n                    >\r\n                        UnFollow\r\n                    </button>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default FollowProfileButton;\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport DefaultProfile from \"../images/avatar.jpg\";\r\n\r\nclass ProfileTabs extends Component {\r\n    render() {\r\n        const { following, followers, posts } = this.props;\r\n        return (\r\n            <div>\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-4\">\r\n                        <h3 className=\"text-primary\">Followers</h3>\r\n                        <hr />\r\n                        {followers.map((person, i) => (\r\n                            <div key={i}>\r\n                                <div>\r\n                                    <Link to={`/user/${person._id}`}>\r\n                                        <img\r\n                                            style={{\r\n                                                borderRadius: \"50%\",\r\n                                                border: \"1px solid black\"\r\n                                            }}\r\n                                            className=\"float-left mr-2\"\r\n                                            height=\"30px\"\r\n                                            width=\"30px\"\r\n                                            onError={i =>\r\n                                                (i.target.src = `${DefaultProfile}`)\r\n                                            }\r\n                                            src={`${\r\n                                                process.env.REACT_APP_API_URL\r\n                                            }/user/photo/${person._id}`}\r\n                                            alt={person.name}\r\n                                        />\r\n                                        <div>\r\n                                            <p className=\"lead\">\r\n                                                {person.name}\r\n                                            </p>\r\n                                        </div>\r\n                                    </Link>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n\r\n                    <div className=\"col-md-4\">\r\n                        <h3 className=\"text-primary\">Following</h3>\r\n                        <hr />\r\n                        {following.map((person, i) => (\r\n                            <div key={i}>\r\n                                <div>\r\n                                    <Link to={`/user/${person._id}`}>\r\n                                        <img\r\n                                            style={{\r\n                                                borderRadius: \"50%\",\r\n                                                border: \"1px solid black\"\r\n                                            }}\r\n                                            className=\"float-left mr-2\"\r\n                                            height=\"30px\"\r\n                                            width=\"30px\"\r\n                                            onError={i =>\r\n                                                (i.target.src = `${DefaultProfile}`)\r\n                                            }\r\n                                            src={`${\r\n                                                process.env.REACT_APP_API_URL\r\n                                            }/user/photo/${person._id}`}\r\n                                            alt={person.name}\r\n                                        />\r\n                                        <div>\r\n                                            <p className=\"lead\">\r\n                                                {person.name}\r\n                                            </p>\r\n                                        </div>\r\n                                    </Link>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n\r\n                    <div className=\"col-md-4\">\r\n                        <h3 className=\"text-primary\">Posts</h3>\r\n                        <hr />\r\n                        {posts.map((post, i) => (\r\n                            <div key={i}>\r\n                                <div>\r\n                                    <Link to={`/post/${post._id}`}>\r\n                                        <div>\r\n                                            <p className=\"lead\">{post.title}</p>\r\n                                        </div>\r\n                                    </Link>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ProfileTabs;\r\n","import React, { Component } from \"react\";\r\nimport { isAuthenticated } from \"../auth\";\r\nimport { Redirect, Link } from \"react-router-dom\";\r\nimport { read } from \"./apiUser\";\r\nimport DefaultProfile from \"../images/avatar.jpg\";\r\nimport DeleteUser from \"./DeleteUser\";\r\nimport FollowProfileButton from \"./FollowProfileButton\";\r\nimport ProfileTabs from \"./ProfileTabs\";\r\nimport { listByUser } from \"../post/apiPost\";\r\n\r\nclass Profile extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            user: { following: [], followers: [] },\r\n            redirectToSignin: false,\r\n            following: false,\r\n            error: \"\",\r\n            posts: []\r\n        };\r\n    }\r\n\r\n    // check follow\r\n    checkFollow = user => {\r\n        const jwt = isAuthenticated();\r\n        const match = user.followers.find(follower => {\r\n            // one id has many other ids (followers) and vice versa\r\n            return follower._id === jwt.user._id;\r\n        });\r\n        return match;\r\n    };\r\n\r\n    clickFollowButton = callApi => {\r\n        const userId = isAuthenticated().user._id;\r\n        const token = isAuthenticated().token;\r\n\r\n        callApi(userId, token, this.state.user._id).then(data => {\r\n            if (data.error) {\r\n                this.setState({ error: data.error });\r\n            } else {\r\n                this.setState({ user: data, following: !this.state.following });\r\n            }\r\n        });\r\n    };\r\n\r\n    init = userId => {\r\n        const token = isAuthenticated().token;\r\n        read(userId, token).then(data => {\r\n            if (data.error) {\r\n                this.setState({ redirectToSignin: true });\r\n            } else {\r\n                let following = this.checkFollow(data);\r\n                this.setState({ user: data, following });\r\n                this.loadPosts(data._id);\r\n            }\r\n        });\r\n    };\r\n\r\n    loadPosts = userId => {\r\n        const token = isAuthenticated().token;\r\n        listByUser(userId, token).then(data => {\r\n            if (data.error) {\r\n                console.log(data.error);\r\n            } else {\r\n                this.setState({ posts: data });\r\n            }\r\n        });\r\n    };\r\n\r\n    componentDidMount() {\r\n        const userId = this.props.match.params.userId;\r\n        this.init(userId);\r\n    }\r\n\r\n    componentWillReceiveProps(props) {\r\n        const userId = props.match.params.userId;\r\n        this.init(userId);\r\n    }\r\n\r\n    render() {\r\n        const { redirectToSignin, user, posts } = this.state;\r\n        if (redirectToSignin) return <Redirect to=\"/signin\" />;\r\n\r\n        const photoUrl = user._id\r\n            ? `${process.env.REACT_APP_API_URL}/user/photo/${\r\n                  user._id\r\n              }?${new Date().getTime()}`\r\n            : DefaultProfile;\r\n\r\n        return (\r\n            <div className=\"container\">\r\n                <h2 className=\"mt-5 mb-5\">Profile</h2>\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-4\">\r\n                        <img\r\n                            style={{ height: \"200px\", width: \"auto\" }}\r\n                            className=\"img-thumbnail\"\r\n                            src={photoUrl}\r\n                            onError={i => (i.target.src = `${DefaultProfile}`)}\r\n                            alt={user.name}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"col-md-8\">\r\n                        <div className=\"lead mt-2\">\r\n                            <p>Hello {user.name}</p>\r\n                            <p>Email: {user.email}</p>\r\n                            <p>{`Joined ${new Date(\r\n                                user.created\r\n                            ).toDateString()}`}</p>\r\n                        </div>\r\n\r\n                        {isAuthenticated().user &&\r\n                        isAuthenticated().user._id === user._id ? (\r\n                            <div className=\"d-inline-block\">\r\n                                <Link\r\n                                    className=\"btn btn-raised btn-info mr-5\"\r\n                                    to={`/post/create`}\r\n                                >\r\n                                    Create Post\r\n                                </Link>\r\n\r\n                                <Link\r\n                                    className=\"btn btn-raised btn-success mr-5\"\r\n                                    to={`/user/edit/${user._id}`}\r\n                                >\r\n                                    Edit Profile\r\n                                </Link>\r\n                                <DeleteUser userId={user._id} />\r\n                            </div>\r\n                        ) : (\r\n                            <FollowProfileButton\r\n                                following={this.state.following}\r\n                                onButtonClick={this.clickFollowButton}\r\n                            />\r\n                        )}\r\n                        <div>\r\n                            {isAuthenticated().user &&\r\n                                isAuthenticated().user.role === \"admin\" && (\r\n                                    <div class=\"card mt-5\">\r\n                                        <div className=\"card-body\">\r\n                                            <h5 className=\"card-title\">\r\n                                                Admin\r\n                                            </h5>\r\n                                            <p className=\"mb-2 text-danger\">\r\n                                                Edit/Delete as an Admin\r\n                                            </p>\r\n                                            <Link\r\n                                                className=\"btn btn-raised btn-success mr-5\"\r\n                                                to={`/user/edit/${user._id}`}\r\n                                            >\r\n                                                Edit Profile\r\n                                            </Link>\r\n                                            <DeleteUser userId={user._id} />\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"row\">\r\n                    <div className=\"col md-12 mt-5 mb-5\">\r\n                        <hr />\r\n                        <p className=\"lead\">{user.about}</p>\r\n                        <hr />\r\n\r\n                        <ProfileTabs\r\n                            followers={user.followers}\r\n                            following={user.following}\r\n                            posts={posts}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Profile;\r\n","import React, { Component } from \"react\";\r\nimport { list } from \"./apiUser\";\r\nimport DefaultProfile from \"../images/avatar.jpg\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nclass Users extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            users: []\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        list().then(data => {\r\n            if (data.error) {\r\n                console.log(data.error);\r\n            } else {\r\n                this.setState({ users: data });\r\n            }\r\n        });\r\n    }\r\n\r\n    renderUsers = users => (\r\n        <div className=\"row\">\r\n            {users.map((user, i) => (\r\n                <div className=\"card col-md-4\" key={i}>\r\n                    <img\r\n                        style={{ height: \"200px\", width: \"auto\" }}\r\n                        className=\"img-thumbnail\"\r\n                        src={`${process.env.REACT_APP_API_URL}/user/photo/${\r\n                            user._id\r\n                        }`}\r\n                        onError={i => (i.target.src = `${DefaultProfile}`)}\r\n                        alt={user.name}\r\n                    />\r\n                    <div className=\"card-body\">\r\n                        <h5 className=\"card-title\">{user.name}</h5>\r\n                        <p className=\"card-text\">{user.email}</p>\r\n                        <Link\r\n                            to={`/user/${user._id}`}\r\n                            className=\"btn btn-raised btn-primary btn-sm\"\r\n                        >\r\n                            View Profile\r\n                        </Link>\r\n                    </div>\r\n                </div>\r\n            ))}\r\n        </div>\r\n    );\r\n\r\n    render() {\r\n        const { users } = this.state;\r\n        return (\r\n            <div className=\"container\">\r\n                <h2 className=\"mt-5 mb-5\">Users</h2>\r\n\r\n                {this.renderUsers(users)}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Users;\r\n","import React, { Component } from \"react\";\r\nimport { isAuthenticated } from \"../auth\";\r\nimport { read, update, updateUser } from \"./apiUser\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport DefaultProfile from \"../images/avatar.jpg\";\r\n\r\nclass EditProfile extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      id: \"\",\r\n      name: \"\",\r\n      email: \"\",\r\n      password: \"\",\r\n      redirectToProfile: false,\r\n      error: \"\",\r\n      fileSize: 0,\r\n      loading: false,\r\n      about: \"\"\r\n    };\r\n  }\r\n\r\n  init = userId => {\r\n    const token = isAuthenticated().token;\r\n    read(userId, token).then(data => {\r\n      if (data.error) {\r\n        this.setState({ redirectToProfile: true });\r\n      } else {\r\n        this.setState({\r\n          id: data._id,\r\n          name: data.name,\r\n          email: data.email,\r\n          error: \"\",\r\n          about: data.about\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.userData = new FormData();\r\n    const userId = this.props.match.params.userId;\r\n    this.init(userId);\r\n  }\r\n\r\n  isValid = () => {\r\n    const { name, email, password, fileSize } = this.state;\r\n    if (fileSize > 1000000) {\r\n      this.setState({\r\n        error: \"File size should be less than 100kb\",\r\n        loading: false\r\n      });\r\n      return false;\r\n    }\r\n    if (name.length === 0) {\r\n      this.setState({ error: \"Name is required\", loading: false });\r\n      return false;\r\n    }\r\n    // email@domain.com\r\n    if (!/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(email)) {\r\n      this.setState({\r\n        error: \"A valid Email is required\",\r\n        loading: false\r\n      });\r\n      return false;\r\n    }\r\n    if (password.length >= 1 && password.length <= 5) {\r\n      this.setState({\r\n        error: \"Password must be at least 6 characters long\",\r\n        loading: false\r\n      });\r\n      return false;\r\n    }\r\n    return true;\r\n  };\r\n\r\n  handleChange = name => event => {\r\n    this.setState({ error: \"\" });\r\n    const value = name === \"photo\" ? event.target.files[0] : event.target.value;\r\n\r\n    const fileSize = name === \"photo\" ? event.target.files[0].size : 0;\r\n    this.userData.set(name, value);\r\n    this.setState({ [name]: value, fileSize });\r\n  };\r\n\r\n  clickSubmit = event => {\r\n    event.preventDefault();\r\n    this.setState({ loading: true });\r\n\r\n    if (this.isValid()) {\r\n      const userId = this.props.match.params.userId;\r\n      const token = isAuthenticated().token;\r\n\r\n      update(userId, token, this.userData).then(data => {\r\n        if (data.error) {\r\n          this.setState({ error: data.error });\r\n        } else if (isAuthenticated().user.role === \"admin\") {\r\n          this.setState({\r\n            redirectToProfile: true\r\n          });\r\n        } else {\r\n          updateUser(data, () => {\r\n            this.setState({\r\n              redirectToProfile: true\r\n            });\r\n          });\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  signupForm = (name, email, password, about) => (\r\n    <form>\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Profile Photo</label>\r\n        <input\r\n          onChange={this.handleChange(\"photo\")}\r\n          type=\"file\"\r\n          accept=\"image/*\"\r\n          className=\"form-control\"\r\n        />\r\n      </div>\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Name</label>\r\n        <input\r\n          onChange={this.handleChange(\"name\")}\r\n          type=\"text\"\r\n          className=\"form-control\"\r\n          value={name}\r\n        />\r\n      </div>\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Email</label>\r\n        <input\r\n          onChange={this.handleChange(\"email\")}\r\n          type=\"email\"\r\n          className=\"form-control\"\r\n          value={email}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">About</label>\r\n        <textarea\r\n          onChange={this.handleChange(\"about\")}\r\n          type=\"text\"\r\n          className=\"form-control\"\r\n          value={about}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Password</label>\r\n        <input\r\n          onChange={this.handleChange(\"password\")}\r\n          type=\"password\"\r\n          className=\"form-control\"\r\n          value={password}\r\n        />\r\n      </div>\r\n      <button onClick={this.clickSubmit} className=\"btn btn-raised btn-primary\">\r\n        Update\r\n      </button>\r\n    </form>\r\n  );\r\n\r\n  render() {\r\n    const {\r\n      id,\r\n      name,\r\n      email,\r\n      password,\r\n      redirectToProfile,\r\n      error,\r\n      loading,\r\n      about\r\n    } = this.state;\r\n\r\n    if (redirectToProfile) {\r\n      return <Redirect to={`/user/${id}`} />;\r\n    }\r\n\r\n    const photoUrl = id\r\n      ? `${\r\n          process.env.REACT_APP_API_URL\r\n        }/user/photo/${id}?${new Date().getTime()}`\r\n      : DefaultProfile;\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        <h2 className=\"mt-5 mb-5\">Edit Profile</h2>\r\n        <div\r\n          className=\"alert alert-danger\"\r\n          style={{ display: error ? \"\" : \"none\" }}\r\n        >\r\n          {error}\r\n        </div>\r\n\r\n        {loading ? (\r\n          <div className=\"jumbotron text-center\">\r\n            <h2>Loading...</h2>\r\n          </div>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n\r\n        <img\r\n          style={{ height: \"200px\", width: \"auto\" }}\r\n          className=\"img-thumbnail\"\r\n          src={photoUrl}\r\n          onError={i => (i.target.src = `${DefaultProfile}`)}\r\n          alt={name}\r\n        />\r\n\r\n        {(isAuthenticated().user.role === \"admin\"||isAuthenticated().user._id === id) &&\r\n          this.signupForm(name, email, password, about)}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default EditProfile;","import React, { Component } from \"react\";\r\nimport { findPeople, follow } from \"./apiUser\";\r\nimport DefaultProfile from \"../images/avatar.jpg\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { isAuthenticated } from \"../auth\";\r\n\r\nclass FindPeople extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            users: [],\r\n            error: \"\",\r\n            open: false\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        const userId = isAuthenticated().user._id;\r\n        const token = isAuthenticated().token;\r\n\r\n        findPeople(userId, token).then(data => {\r\n            if (data.error) {\r\n                console.log(data.error);\r\n            } else {\r\n                this.setState({ users: data });\r\n            }\r\n        });\r\n    }\r\n\r\n    clickFollow = (user, i) => {\r\n        const userId = isAuthenticated().user._id;\r\n        const token = isAuthenticated().token;\r\n\r\n        follow(userId, token, user._id).then(data => {\r\n            if (data.error) {\r\n                this.setState({ error: data.error });\r\n            } else {\r\n                let toFollow = this.state.users;\r\n                toFollow.splice(i, 1);\r\n                this.setState({\r\n                    users: toFollow,\r\n                    open: true,\r\n                    followMessage: `Following ${user.name}`\r\n                });\r\n            }\r\n        });\r\n    };\r\n\r\n    renderUsers = users => (\r\n        <div className=\"row\">\r\n            {users.map((user, i) => (\r\n                <div className=\"card col-md-4\" key={i}>\r\n                    <img\r\n                        style={{ height: \"200px\", width: \"auto\" }}\r\n                        className=\"img-thumbnail\"\r\n                        src={`${process.env.REACT_APP_API_URL}/user/photo/${\r\n                            user._id\r\n                        }`}\r\n                        onError={i => (i.target.src = `${DefaultProfile}`)}\r\n                        alt={user.name}\r\n                    />\r\n                    <div className=\"card-body\">\r\n                        <h5 className=\"card-title\">{user.name}</h5>\r\n                        <p className=\"card-text\">{user.email}</p>\r\n                        <Link\r\n                            to={`/user/${user._id}`}\r\n                            className=\"btn btn-raised btn-primary btn-sm\"\r\n                        >\r\n                            View Profile\r\n                        </Link>\r\n\r\n                        <button\r\n                            onClick={() => this.clickFollow(user, i)}\r\n                            className=\"btn btn-raised btn-info float-right btn-sm\"\r\n                        >\r\n                            Follow\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            ))}\r\n        </div>\r\n    );\r\n\r\n    render() {\r\n        const { users, open, followMessage } = this.state;\r\n        return (\r\n            <div className=\"container\">\r\n                <h2 className=\"mt-5 mb-5\">Find People</h2>\r\n\r\n                {open && (\r\n                    <div className=\"alert alert-success\">{followMessage}</div>\r\n                )}\r\n\r\n                {this.renderUsers(users)}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default FindPeople;\r\n","import React, { Component } from \"react\";\r\nimport { isAuthenticated } from \"../auth\";\r\nimport { create } from \"./apiPost\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nclass NewPost extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            title: \"\",\r\n            body: \"\",\r\n            photo: \"\",\r\n            error: \"\",\r\n            user: {},\r\n            fileSize: 0,\r\n            loading: false,\r\n            redirectToProfile: false\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.postData = new FormData();\r\n        this.setState({ user: isAuthenticated().user });\r\n    }\r\n\r\n    isValid = () => {\r\n        const { title, body, fileSize } = this.state;\r\n        if (fileSize > 100000) {\r\n            this.setState({\r\n                error: \"File size should be less than 100kb\",\r\n                loading: false\r\n            });\r\n            return false;\r\n        }\r\n        if (title.length === 0 || body.length === 0) {\r\n            this.setState({ error: \"All fields are required\", loading: false });\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n\r\n    handleChange = name => event => {\r\n        this.setState({ error: \"\" });\r\n        const value =\r\n            name === \"photo\" ? event.target.files[0] : event.target.value;\r\n\r\n        const fileSize = name === \"photo\" ? event.target.files[0].size : 0;\r\n        this.postData.set(name, value);\r\n        this.setState({ [name]: value, fileSize });\r\n    };\r\n\r\n    clickSubmit = event => {\r\n        event.preventDefault();\r\n        this.setState({ loading: true });\r\n\r\n        if (this.isValid()) {\r\n            const userId = isAuthenticated().user._id;\r\n            const token = isAuthenticated().token;\r\n\r\n            create(userId, token, this.postData).then(data => {\r\n                if (data.error) this.setState({ error: data.error });\r\n                else {\r\n                    this.setState({\r\n                        loading: false,\r\n                        title: \"\",\r\n                        body: \"\",\r\n                        redirectToProfile: true\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    newPostForm = (title, body) => (\r\n        <form>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Post Photo</label>\r\n                <input\r\n                    onChange={this.handleChange(\"photo\")}\r\n                    type=\"file\"\r\n                    accept=\"image/*\"\r\n                    className=\"form-control\"\r\n                />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Title</label>\r\n                <input\r\n                    onChange={this.handleChange(\"title\")}\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    value={title}\r\n                />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Body</label>\r\n                <textarea\r\n                    onChange={this.handleChange(\"body\")}\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    value={body}\r\n                />\r\n            </div>\r\n\r\n            <button\r\n                onClick={this.clickSubmit}\r\n                className=\"btn btn-raised btn-primary\"\r\n            >\r\n                Create Post\r\n            </button>\r\n        </form>\r\n    );\r\n\r\n    render() {\r\n        const {\r\n            title,\r\n            body,\r\n            photo,\r\n            user,\r\n            error,\r\n            loading,\r\n            redirectToProfile\r\n        } = this.state;\r\n\r\n        if (redirectToProfile) {\r\n            return <Redirect to={`/user/${user._id}`} />;\r\n        }\r\n\r\n        return (\r\n            <div className=\"container\">\r\n                <h2 className=\"mt-5 mb-5\">Create a new post</h2>\r\n                <div\r\n                    className=\"alert alert-danger\"\r\n                    style={{ display: error ? \"\" : \"none\" }}\r\n                >\r\n                    {error}\r\n                </div>\r\n\r\n                {loading ? (\r\n                    <div className=\"jumbotron text-center\">\r\n                        <h2>Loading...</h2>\r\n                    </div>\r\n                ) : (\r\n                    \"\"\r\n                )}\r\n\r\n                {this.newPostForm(title, body)}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default NewPost;\r\n","import React,{Component} from 'react';\r\nimport {comment,uncomment} from \"./apiPost\"\r\nimport {isAuthenticated} from \"../auth\" \r\nimport {Link} from \"react-router-dom\"\r\nimport DefaultProfile from \"../images/avatar.jpg\"\r\n\r\nclass Comment extends Component{\r\n    state={\r\n        text:\"\",\r\n        error:\"\"\r\n    }\r\n    \r\n    handleChange = event => {\r\n        this.setState({ error: \"\" });\r\n        this.setState({ text: event.target.value });\r\n    };\r\n\r\n    \r\n    isvalid=()=>{\r\n        const {text}=this.state;\r\n        if(!text.length>0||text.length>150)\r\n        {\r\n            this.setState({error:\"Comment should not be empty or greater than 150 characters\"});\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n    \r\n    addComment=e=>{\r\n        e.preventDefault();\r\n        \r\n        if(!isAuthenticated()){\r\n            this.setState({error:\"Please signin to leave a comment!\"})\r\n            return false;\r\n        }\r\n        \r\n        if(this.isvalid()){\r\n            const userId=isAuthenticated().user._id;\r\n            const token=isAuthenticated().token;\r\n            const postId=this.props.postId;\r\n            \r\n            comment(userId, token, postId, {text:this.state.text})\r\n            .then(data=>{\r\n                if(data.error){\r\n                    console.log(data.error);\r\n                }\r\n                else{\r\n                    this.setState({text:''});\r\n                    //dispatch fresh list of comments to parent\r\n                    this.props.updateComments(data.comments);\r\n                }\r\n            })\r\n        }\r\n    }\r\n    \r\n    deleteComment=(comment)=>{\r\n        const userId=isAuthenticated().user._id;\r\n        const token=isAuthenticated().token;\r\n        const postId=this.props.postId;\r\n        \r\n        uncomment(userId, token, postId, comment)\r\n        .then(data=>{\r\n            if(data.error){\r\n                console.log(data.error);\r\n            }\r\n            else{\r\n                this.props.updateComments(data.comments);\r\n            }\r\n        })\r\n    }\r\n    \r\n    deleteConfirmed = (comment) => {\r\n        let answer = window.confirm(\r\n            \"Are you sure you want to delete your comment?\"\r\n        );\r\n        if (answer) {\r\n            this.deleteComment(comment);\r\n        }\r\n    };\r\n    \r\n    render(){\r\n        const {comments} = this.props;\r\n        const {error}=this.state;\r\n        \r\n        return(\r\n            <div>\r\n                <h2 className=\"mt-5 mb-5\">Leave a comment</h2>\r\n                <form onSubmit={this.addComment}>\r\n                    <div className=\"form-group\">\r\n                        <input className=\"form-control\" type=\"text\" value={this.state.text} onChange={this.handleChange} placeholder=\"Leave a comment...\"/>\r\n                        <button className=\"btn btn-raised btn-success mt-2\">Comment</button>\r\n                    </div>\r\n                </form>\r\n                \r\n                <div\r\n                    className=\"alert alert-danger\"\r\n                    style={{ display: error ? \"\" : \"none\" }}\r\n                >\r\n                    {error}\r\n                </div>\r\n                \r\n                <hr/>\r\n                \r\n                <div className=\"col-md-12 col-md-offset-2\">\r\n                    <h3 className=\"text-primary\">{comments.length} Comments</h3>\r\n                    <hr />\r\n                    {comments.map((comment, i) => (\r\n                        <div key={i}>\r\n                            <div>\r\n                                <Link to={`/user/${comment.postedBy._id}`}>\r\n                                    <img\r\n                                        style={{\r\n                                            borderRadius: \"50%\",\r\n                                            border: \"1px solid black\"\r\n                                        }}\r\n                                        className=\"float-left mr-2\"\r\n                                        height=\"30px\"\r\n                                        width=\"30px\"\r\n                                        onError={i =>\r\n                                            (i.target.src = `${DefaultProfile}`)\r\n                                        }\r\n                                        src={`${\r\n                                            process.env.REACT_APP_API_URL\r\n                                        }/user/photo/${comment.postedBy._id}`}\r\n                                        alt={comment.postedBy.name}\r\n                                    />\r\n                                </Link>\r\n                                <div>\r\n                                    <p className=\"lead\">\r\n                                        {comment.text}\r\n                                    </p>\r\n                                    <p className=\"font-italic mark\">\r\n                                        Posted by <Link to={`/user/${comment.postedBy._id}`}>{comment.postedBy.name} </Link>\r\n                                        on {new Date(comment.created).toDateString()}\r\n                                        \r\n                                        <span>\r\n                                            {isAuthenticated().user &&\r\n                                                isAuthenticated().user._id === comment.postedBy._id && \r\n                                                    <>\r\n                                                        <span onClick={()=>this.deleteConfirmed(comment)} className=\"text-danger float-right mr-1\">\r\n                                                            Remove\r\n                                                        </span>\r\n                                                    </>    \r\n                                            }\r\n                                        </span>\r\n                                        \r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n};\r\n\r\nexport default Comment;","import React, { Component } from \"react\";\r\nimport { singlePost,remove,like,unlike } from \"./apiPost\";\r\nimport DefaultPost from \"../images/mountains.jpg\";\r\nimport { Link,Redirect } from \"react-router-dom\";\r\nimport {isAuthenticated} from '../auth';\r\nimport Comment from \"./Comment\"\r\n\r\nclass SinglePost extends Component {\r\n    state = {\r\n        post: \"\",\r\n        redirectToHome:false,\r\n        redirectToSignin:false,\r\n        like:false,\r\n        likes:0,\r\n        comments:[]\r\n    };\r\n    likeToggle=()=>{\r\n        if(!isAuthenticated()){\r\n            this.setState({redirectToSignin:true});\r\n            return false;\r\n        }\r\n        let callApi=this.state.like?unlike:like;\r\n        const userId=isAuthenticated().user._id;\r\n        const postId=this.state.post._id;\r\n        const token=isAuthenticated().token;\r\n        callApi(userId,token,postId).then(data=>{\r\n            if(data.error){\r\n                console.log(data.error)\r\n            }\r\n            else{\r\n                this.setState({\r\n                    like:!this.state.like,\r\n                    likes:data.likes.length\r\n                })\r\n            }\r\n        })\r\n    }\r\n    \r\n    updateComments=comments=>{\r\n        this.setState({comments});\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        const postId = this.props.match.params.postId;\r\n        singlePost(postId).then(data => {\r\n            if(data===undefined){\r\n                console.log(\"No response from server\");\r\n            }\r\n            else if(data.error){\r\n                console.log(data.error);\r\n            }\r\n            else {\r\n                this.setState({ \r\n                    post: data, \r\n                    likes:data.likes.length,\r\n                    like:this.checkLike(data.likes),\r\n                    comments:data.comments\r\n                });\r\n            }\r\n        });\r\n    };\r\n    \r\n    checkLike=(likes)=>{\r\n        const userId= isAuthenticated() && isAuthenticated().user._id;\r\n        let match=(likes.indexOf(userId)!==-1);\r\n        return match;\r\n    }\r\n    \r\n    deletePost=()=>{\r\n        const postId = this.props.match.params.postId;\r\n        const token=isAuthenticated().token;\r\n        remove(postId,token).then(data=>{\r\n            if(data===undefined){\r\n                console.log(\"No response from server\");\r\n            }\r\n            else if(data.error){\r\n                console.log(data.error);\r\n            }\r\n            else{\r\n                this.setState({redirectToHome:true});\r\n            }\r\n        })\r\n    }\r\n    \r\n    deleteConfirmed = () => {\r\n        let answer = window.confirm(\r\n            \"Are you sure you want to delete your account?\"\r\n        );\r\n        if (answer) {\r\n            this.deletePost();\r\n        }\r\n    };\r\n\r\n    renderPost = post => {\r\n        const posterId = post.postedBy ? `/user/${post.postedBy._id}` : \"\";\r\n        const posterName = post.postedBy ? post.postedBy.name : \" Unknown\";\r\n        const {like,likes}=this.state;\r\n        \r\n        return (\r\n            <div className=\"card-body\">\r\n                <img\r\n                    src={`${process.env.REACT_APP_API_URL}/post/photo/${\r\n                        post._id\r\n                    }`}\r\n                    alt={post.title}\r\n                    onError={i => (i.target.src = `${DefaultPost}`)}\r\n                    className=\"img-thunbnail mb-3\"\r\n                    style={{\r\n                        height: \"300px\",\r\n                        width: \"100%\",\r\n                        objectFit: \"cover\"\r\n                    }}\r\n                />\r\n                \r\n                {like?(\r\n                        <h3 onClick={this.likeToggle}>\r\n                            <i className=\"fa fa-thumbs-up text-success bg-dark\" style={{padding:\"10px\",borderRadius:\"50%\"}}/>\r\n                            {\" \"}{likes} Like\r\n                        </h3> \r\n                    ):(\r\n                        <h3 onClick={this.likeToggle}>\r\n                            <i className=\"fa fa-thumbs-up text-warning bg-dark\" style={{padding:\"10px\",borderRadius:\"50%\"}}/>\r\n                            {\" \"}{likes} Like\r\n                        </h3>\r\n                    )\r\n                }\r\n                \r\n                <p className=\"card-text\">{post.body}</p>\r\n                <br />\r\n                <p className=\"font-italic mark\">\r\n                    Posted by <Link to={`${posterId}`}>{posterName} </Link>\r\n                    on {new Date(post.created).toDateString()}\r\n                </p>\r\n                <div className=\"d-inline-block\">\r\n                    <Link to={`/`} className=\"btn btn-raised btn-primary btn-sm mr-5\">\r\n                        Back to posts\r\n                    </Link>\r\n                    \r\n                    {isAuthenticated().user &&\r\n                        isAuthenticated().user._id === post.postedBy._id && \r\n                            <>\r\n                                <Link to={`/post/edit/${post._id}`} className=\"btn btn-raised btn-warning btn-sm mr-5\">\r\n                                    Update post\r\n                                </Link>\r\n                                <button onClick={this.deleteConfirmed} className=\"btn btn-raised btn-danger btn-sm\">\r\n                                    Delete post\r\n                                </button>\r\n                            </>    \r\n                    }\r\n                    <div>\r\n                        {isAuthenticated().user &&\r\n                            isAuthenticated().user.role === \"admin\" && (\r\n                                <div className=\"card mt-5\">\r\n                                    <div className=\"card-body\">\r\n                                        <h5 className=\"card-title\">Admin</h5>\r\n                                        <p className=\"mb-2 text-danger\">\r\n                                            Edit/Delete as an Admin\r\n                                        </p>\r\n                                        <Link\r\n                                            to={`/post/edit/${post._id}`}\r\n                                            className=\"btn btn-raised btn-warning btn-sm mr-5\"\r\n                                        >\r\n                                            Update Post\r\n                                        </Link>\r\n                                        <button\r\n                                            onClick={this.deleteConfirmed}\r\n                                            className=\"btn btn-raised btn-danger\"\r\n                                        >\r\n                                            Delete Post\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    render() {\r\n        const { post,redirectToHome,redirectToSignin,comments } = this.state;\r\n        if (redirectToHome) {\r\n            return <Redirect to={`/`} />;\r\n        }\r\n        else if (redirectToSignin) {\r\n            return <Redirect to={`/signin`} />;\r\n        }\r\n        return (\r\n            <div className=\"container\">\r\n                <h2 className=\"display-2 mt-5 mb-5\">{post.title}</h2>\r\n\r\n                {!post ? (\r\n                    <div className=\"jumbotron text-center\">\r\n                        <h2>Loading...</h2>\r\n                    </div>\r\n                ) : (\r\n                    this.renderPost(post)\r\n                )}\r\n                <Comment \r\n                    postId={post._id} \r\n                    comments={comments.reverse()} \r\n                    updateComments={this.updateComments}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default SinglePost;\r\n","import React, { Component } from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { isAuthenticated } from \"./index\";\r\n\r\nconst PrivateRoute = ({ component: Component, ...rest }) => (\r\n    // props means components passed down to this pricate route component\r\n    <Route\r\n        {...rest}\r\n        render={props =>\r\n            isAuthenticated() ? (\r\n                <Component {...props} />\r\n            ) : (\r\n                <Redirect\r\n                    to={{\r\n                        pathname: \"/signin\",\r\n                        state: { from: props.location }\r\n                    }}\r\n                />\r\n            )\r\n        }\r\n    />\r\n);\r\n\r\nexport default PrivateRoute;\r\n","import React, { Component } from \"react\";\r\nimport { singlePost, update } from \"./apiPost\";\r\nimport { isAuthenticated } from \"../auth\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport DefaultPost from \"../images/mountains.jpg\";\r\n\r\nclass EditPost extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            id: \"\",\r\n            title: \"\",\r\n            body: \"\",\r\n            redirectToProfile: false,\r\n            error: \"\",\r\n            fileSize: 0,\r\n            loading: false\r\n        };\r\n    }\r\n\r\n    init = postId => {\r\n        singlePost(postId).then(data => {\r\n            if (data.error) {\r\n                this.setState({ redirectToProfile: true });\r\n            } else {\r\n                this.setState({\r\n                    id: data.postedBy._id,\r\n                    title: data.title,\r\n                    body: data.body,\r\n                    error: \"\"\r\n                });\r\n            }\r\n        });\r\n    };\r\n\r\n    componentDidMount() {\r\n        this.postData = new FormData();\r\n        const postId = this.props.match.params.postId;\r\n        this.init(postId);\r\n    }\r\n\r\n    isValid = () => {\r\n        const { title, body, fileSize } = this.state;\r\n        if (fileSize > 1000000) {\r\n            this.setState({\r\n                error: \"File size should be less than 100kb\",\r\n                loading: false\r\n            });\r\n            return false;\r\n        }\r\n        if (title.length === 0 || body.length === 0) {\r\n            this.setState({ error: \"All fields are required\", loading: false });\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n\r\n    handleChange = name => event => {\r\n        this.setState({ error: \"\" });\r\n        const value =\r\n            name === \"photo\" ? event.target.files[0] : event.target.value;\r\n\r\n        const fileSize = name === \"photo\" ? event.target.files[0].size : 0;\r\n        this.postData.set(name, value);\r\n        this.setState({ [name]: value, fileSize });\r\n    };\r\n\r\n    clickSubmit = event => {\r\n        event.preventDefault();\r\n        this.setState({ loading: true });\r\n\r\n        if (this.isValid()) {\r\n            const postId = this.props.match.params.postId;\r\n            const token = isAuthenticated().token;\r\n\r\n            update(postId, token, this.postData).then(data => {\r\n                if (data.error) this.setState({ error: data.error });\r\n                else {\r\n                    this.setState({\r\n                        loading: false,\r\n                        title: \"\",\r\n                        body: \"\",\r\n                        redirectToProfile: true\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    editPostForm = (title, body) => (\r\n        <form>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Post Photo</label>\r\n                <input\r\n                    onChange={this.handleChange(\"photo\")}\r\n                    type=\"file\"\r\n                    accept=\"image/*\"\r\n                    className=\"form-control\"\r\n                />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Title</label>\r\n                <input\r\n                    onChange={this.handleChange(\"title\")}\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    value={title}\r\n                />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Body</label>\r\n                <textarea\r\n                    onChange={this.handleChange(\"body\")}\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    value={body}\r\n                />\r\n            </div>\r\n\r\n            <button\r\n                onClick={this.clickSubmit}\r\n                className=\"btn btn-raised btn-primary\"\r\n            >\r\n                Update Post\r\n            </button>\r\n        </form>\r\n    );\r\n\r\n    render() {\r\n        const {\r\n            id,\r\n            title,\r\n            body,\r\n            redirectToProfile,\r\n            error,\r\n            loading\r\n        } = this.state;\r\n\r\n        if (redirectToProfile) {\r\n            return <Redirect to={`/user/${isAuthenticated().user._id}`} />;\r\n        }\r\n\r\n        return (\r\n            <div className=\"container\">\r\n                <h2 className=\"mt-5 mb-5\">{title}</h2>\r\n\r\n                <div\r\n                    className=\"alert alert-danger\"\r\n                    style={{ display: error ? \"\" : \"none\" }}\r\n                >\r\n                    {error}\r\n                </div>\r\n\r\n                {loading ? (\r\n                    <div className=\"jumbotron text-center\">\r\n                        <h2>Loading...</h2>\r\n                    </div>\r\n                ) : (\r\n                    \"\"\r\n                )}\r\n\r\n                <img\r\n                    style={{ height: \"200px\", width: \"auto\" }}\r\n                    className=\"img-thumbnail\"\r\n                    src={`${\r\n                        process.env.REACT_APP_API_URL\r\n                    }/post/photo/${this.props.match.params.postId}?${new Date().getTime()}`}\r\n                    onError={i => (i.target.src = `${DefaultPost}`)}\r\n                    alt={title}\r\n                />\r\n\r\n                {(isAuthenticated().user.role === \"admin\" ||isAuthenticated().user._id === id) &&\r\n                    this.editPostForm(title, body)}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default EditPost;","import React, { Component } from \"react\";\r\nimport { forgotPassword } from \"../auth\";\r\n \r\nclass ForgotPassword extends Component {\r\n    state = {\r\n        email: \"\",\r\n        message: \"\",\r\n        error: \"\"\r\n    };\r\n \r\n    forgotPassword = e => {\r\n        e.preventDefault();\r\n        this.setState({ message: \"\", error: \"\" });\r\n        forgotPassword(this.state.email).then(data => {\r\n            if (data.error) {\r\n                console.log(data.error);\r\n                this.setState({ error: data.error });\r\n            } else {\r\n                console.log(data.message);\r\n                this.setState({ message: data.message });\r\n            }\r\n        });\r\n    };\r\n \r\n    render() {\r\n        return (\r\n            <div className=\"container\">\r\n                <h2 className=\"mt-5 mb-5\">Ask for Password Reset</h2>\r\n \r\n                {this.state.message && (\r\n                    <h4 className=\"bg-success\">{this.state.message}</h4>\r\n                )}\r\n                {this.state.error && (\r\n                    <h4 className=\"bg-warning\">{this.state.error}</h4>\r\n                )}\r\n \r\n                <form>\r\n                    <div className=\"form-group mt-5\">\r\n                        <input\r\n                            type=\"email\"\r\n                            className=\"form-control\"\r\n                            placeholder=\"Your email address\"\r\n                            value={this.state.email}\r\n                            name=\"email\"\r\n                            onChange={e =>\r\n                                this.setState({\r\n                                    email: e.target.value,\r\n                                    message: \"\",\r\n                                    error: \"\"\r\n                                })\r\n                            }\r\n                            autoFocus\r\n                        />\r\n                    </div>\r\n                    <button\r\n                        onClick={this.forgotPassword}\r\n                        className=\"btn btn-raised btn-primary\"\r\n                    >\r\n                        Send Password Rest Link\r\n                    </button>\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n \r\nexport default ForgotPassword;","import React, { Component } from \"react\";\r\nimport { resetPassword } from \"../auth\";\r\n \r\nclass ResetPassword extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            newPassword: \"\",\r\n            message: \"\",\r\n            error: \"\"\r\n        };\r\n    }\r\n \r\n    resetPassword = e => {\r\n        e.preventDefault();\r\n        this.setState({ message: \"\", error: \"\" });\r\n \r\n        resetPassword({\r\n            newPassword: this.state.newPassword,\r\n            resetPasswordLink: this.props.match.params.resetPasswordToken\r\n        }).then(data => {\r\n            if (data.error) {\r\n                console.log(data.error);\r\n                this.setState({ error: data.error });\r\n            } else {\r\n                console.log(data.message);\r\n                this.setState({ message: data.message, newPassword: \"\" });\r\n            }\r\n        });\r\n    };\r\n \r\n    render() {\r\n        return (\r\n            <div className=\"container\">\r\n                <h2 className=\"mt-5 mb-5\">Reset your Password</h2>\r\n \r\n                {this.state.message && (\r\n                    <h4 className=\"bg-success\">{this.state.message}</h4>\r\n                )}\r\n                {this.state.error && (\r\n                    <h4 className=\"bg-warning\">{this.state.error}</h4>\r\n                )}\r\n \r\n                <form>\r\n                    <div className=\"form-group mt-5\">\r\n                        <input\r\n                            type=\"password\"\r\n                            className=\"form-control\"\r\n                            placeholder=\"Your new password\"\r\n                            value={this.state.newPassword}\r\n                            name=\"newPassword\"\r\n                            onChange={e =>\r\n                                this.setState({\r\n                                    newPassword: e.target.value,\r\n                                    message: \"\",\r\n                                    error: \"\"\r\n                                })\r\n                            }\r\n                            autoFocus\r\n                        />\r\n                    </div>\r\n                    <button\r\n                        onClick={this.resetPassword}\r\n                        className=\"btn btn-raised btn-primary\"\r\n                    >\r\n                        Reset Password\r\n                    </button>\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n \r\nexport default ResetPassword;","import React, { Component } from \"react\";\r\nimport Posts from \"../post/Posts\";\r\nimport Users from \"../user/Users\";\r\nimport { isAuthenticated } from \"../auth\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nclass Admin extends Component {\r\n    \r\n    state = {\r\n        redirectToHome: false\r\n    };\r\n    \r\n    componentDidMount() {\r\n        if (isAuthenticated().user.role !== \"admin\") {\r\n            this.setState({ redirectToHome: true });\r\n        }\r\n    }\r\n    render() {\r\n        if (this.state.redirectToHome) {\r\n            return <Redirect to=\"/\" />;\r\n        }\r\n        \r\n        return (\r\n            <div>\r\n                <div className=\"jumbotron\">\r\n                    <h2>Admin Dashboard</h2>\r\n                    <p className=\"lead\">Welcome to React Frontend</p>\r\n                </div>\r\n                <div className=\"container-fluid\">\r\n                    <div className=\"row\">\r\n                        <div className=\"col-md-6\">\r\n                            <h2>Posts</h2>\r\n                            <hr />\r\n                            <Posts />\r\n                        </div>\r\n                        <div className=\"col-md-6\">\r\n                            <h2>Users</h2>\r\n                            <hr />\r\n                            <Users />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n \r\nexport default Admin;","import React from \"react\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport Home from \"../core/Home\";\r\nimport Menu from \"../core/Menu\";\r\nimport Signup from \"../user/Signup\";\r\nimport Signin from \"../user/Signin\";\r\nimport Profile from \"../user/Profile\";\r\nimport Users from \"../user/Users\";\r\nimport EditProfile from \"../user/EditProfile\";\r\nimport FindPeople from \"../user/FindPeople\";\r\nimport NewPost from \"../post/NewPost\";\r\nimport SinglePost from \"../post/SinglePost\";\r\nimport PrivateRoute from \"../auth/PrivateRoute\";\r\nimport EditPost from \"../post/EditPost\";\r\nimport ForgotPassword from \"../user/ForgotPassword\";\r\nimport ResetPassword from \"../user/ResetPassword\";\r\nimport Admin from '../admin/Admin'\r\n\r\n\r\nconst MainRouter = () => (\r\n    <div>\r\n        <Menu />\r\n        <Switch>\r\n            <Route exact path=\"/\" component={Home} />\r\n            <Route exact path=\"/forgot-password\" component={ForgotPassword} />\r\n            <PrivateRoute exact path=\"/admin\" component={Admin} />\r\n            <PrivateRoute exact path=\"/post/create\" component={NewPost} />\r\n            <Route exact path=\"/post/:postId\" component={SinglePost} />\r\n            <PrivateRoute exact path=\"/post/edit/:postId\" component={EditPost} />\r\n            <Route exact path=\"/users\" component={Users} />\r\n            <Route exact path=\"/signup\" component={Signup} />\r\n            <Route exact path=\"/signin\" component={Signin} />\r\n            <PrivateRoute\r\n                exact\r\n                path=\"/user/edit/:userId\"\r\n                component={EditProfile}\r\n            />\r\n            <Route\r\n                exact\r\n                path=\"/reset-password/:resetPasswordToken\"\r\n                component={ResetPassword}\r\n            />\r\n            <PrivateRoute exact path=\"/findpeople\" component={FindPeople} />\r\n            <PrivateRoute exact path=\"/user/:userId\" component={Profile} />\r\n        </Switch>\r\n    </div>\r\n);\r\n\r\nexport default MainRouter;\r\n","import React from \"react\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\nimport MainRouter from \"./MainRouter\";\r\n\r\nconst App = () => (\r\n    <BrowserRouter>\r\n        <MainRouter />\r\n    </BrowserRouter>\r\n);\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n","module.exports = __webpack_public_path__ + \"static/media/avatar.b23d5960.jpg\";"],"sourceRoot":""}